{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rtchudjo/ifcmv8/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/rtchudjo/ifcmv8/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{Plugins}from'@capacitor/core';var Storage=Plugins.Storage;var dataUrl='/assets/data/data.json';var HAS_LOGGED_IN='hasLoggedIn';var HAS_SEEN_TUTORIAL='hasSeenTutorial';var USERNAME='username';//const [data type AppState, setData] = useState(false);\nconsole.log(\"début\");export var getAppData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,responseData,events,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"debut lecture du fichier data.json\");_context.next=3;return Promise.all([fetch(dataUrl)]);case 3:response=_context.sent;console.log(response);console.log(\"fin lecture du fichier data.json\");console.log(\"debut fetch data.json\");_context.next=9;return response[0].json();case 9:responseData=_context.sent;console.log(\"fin fetch data.json\");console.log(responseData);console.log(\"debut fetch event structure\");events=responseData.Event;console.log(\"fin fetch event structure\");data={events:events};console.log(data);console.log(\"fin reading data\");return _context.abrupt(\"return\",data);case 19:case\"end\":return _context.stop();}}},_callee);}));return function getAppData(){return _ref.apply(this,arguments);};}();export var loadAppData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(\"debut loading data\");_context2.next=3;return getAppData();case 3:data=_context2.sent;console.log(data);console.log(\"fin loading data\");case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function loadAppData(){return _ref2.apply(this,arguments);};}();export var setLoading=function setLoading(isLoading){return{type:'set-app-loading',isLoading:isLoading};};export var setData=function setData(data){return{type:'set-app-data',data:data};};export var getUserData=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var response,isLoggedin,hasSeenTutorial,username,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return Promise.all([Storage.get({key:HAS_LOGGED_IN}),Storage.get({key:HAS_SEEN_TUTORIAL}),Storage.get({key:USERNAME})]);case 2:response=_context3.sent;_context3.next=5;return response[0].value;case 5:_context3.t0=_context3.sent;isLoggedin=_context3.t0==='true';_context3.next=9;return response[1].value;case 9:_context3.t1=_context3.sent;hasSeenTutorial=_context3.t1==='true';_context3.next=13;return response[2].value;case 13:_context3.t2=_context3.sent;if(_context3.t2){_context3.next=16;break;}_context3.t2=undefined;case 16:username=_context3.t2;data={isLoggedin:isLoggedin,hasSeenTutorial:hasSeenTutorial,username:username};return _context3.abrupt(\"return\",data);case 19:case\"end\":return _context3.stop();}}},_callee3);}));return function getUserData(){return _ref3.apply(this,arguments);};}();export var setIsLoggedInData=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(isLoggedIn){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return Storage.set({key:HAS_LOGGED_IN,value:JSON.stringify(isLoggedIn)});case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function setIsLoggedInData(_x){return _ref4.apply(this,arguments);};}();export var setUsernameData=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(username){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(username){_context5.next=5;break;}_context5.next=3;return Storage.remove({key:USERNAME});case 3:_context5.next=7;break;case 5:_context5.next=7;return Storage.set({key:USERNAME,value:username});case 7:case\"end\":return _context5.stop();}}},_callee5);}));return function setUsernameData(_x2){return _ref5.apply(this,arguments);};}();export var setHasSeenTutorialData=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(hasSeenTutorial){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return Storage.set({key:HAS_SEEN_TUTORIAL,value:JSON.stringify(hasSeenTutorial)});case 2:case\"end\":return _context6.stop();}}},_callee6);}));return function setHasSeenTutorialData(_x3){return _ref6.apply(this,arguments);};}();","map":{"version":3,"sources":["/Users/rtchudjo/ifcmv8/src/data/dataApi.ts"],"names":["Plugins","Storage","dataUrl","HAS_LOGGED_IN","HAS_SEEN_TUTORIAL","USERNAME","console","log","getAppData","Promise","all","fetch","response","json","responseData","events","Event","data","loadAppData","setLoading","isLoading","type","setData","getUserData","get","key","value","isLoggedin","hasSeenTutorial","undefined","username","setIsLoggedInData","isLoggedIn","set","JSON","stringify","setUsernameData","remove","setHasSeenTutorialData"],"mappings":"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","sourcesContent":["import { Plugins } from '@capacitor/core';\nimport { useState } from 'react';\n\nimport { ActionType } from './types'; \nimport { AppIfcmState, Event, Shopping,ShoppingItem, Teaching, TeachingLesson } from './models';\n\n\nconst { Storage } = Plugins;\n\n\nconst dataUrl = '/assets/data/data.json';\n\nconst HAS_LOGGED_IN = 'hasLoggedIn';\nconst HAS_SEEN_TUTORIAL = 'hasSeenTutorial';\nconst USERNAME = 'username';\n\n//const [data type AppState, setData] = useState(false);\nconsole.log(\"début\");\n\nexport const getAppData = async () => {\n\n  console.log(\"debut lecture du fichier data.json\");\n\n  const response = await Promise.all([\n    fetch(dataUrl)]);\n\n  console.log(response);\n\n  console.log(\"fin lecture du fichier data.json\");\n\n\n  console.log(\"debut fetch data.json\");\n  const responseData = await response[0].json();\n  console.log(\"fin fetch data.json\");\n\n  console.log(responseData);\n\n\n  console.log(\"debut fetch event structure\");\n  const events = responseData.Event as Event[];\n  console.log(\"fin fetch event structure\");\n\n  const data = {\n    events\n  }\n\n  console.log(data);\n\n  console.log(\"fin reading data\");\n\n  return data;\n}\n\n\nexport const loadAppData = async () => {\n\n  console.log(\"debut loading data\");\n\n  const data = await getAppData();\n  console.log(data);\n  console.log(\"fin loading data\");\n\n\n}\n\nexport const setLoading = (isLoading: boolean) => ({\n  type: 'set-app-loading',\n  isLoading\n} as const);\n\nexport const setData = (data: Partial<AppIfcmState>) => ({\n  type: 'set-app-data',\n  data\n} as const);\n\nexport type SessionsActions =\n  | ActionType<typeof setLoading>\n  | ActionType<typeof setData>\n\n\n  export const getUserData = async () => {\n    const response = await Promise.all([\n      Storage.get({ key: HAS_LOGGED_IN }),\n      Storage.get({ key: HAS_SEEN_TUTORIAL }),\n      Storage.get({ key: USERNAME })]);\n    const isLoggedin = await response[0].value === 'true';\n    const hasSeenTutorial = await response[1].value === 'true';\n    const username = await response[2].value || undefined;\n    const data = {\n      isLoggedin,\n      hasSeenTutorial,\n      username\n    }\n    return data;\n  }\n  \n  export const setIsLoggedInData = async (isLoggedIn: boolean) => {\n    await Storage.set({ key: HAS_LOGGED_IN, value: JSON.stringify(isLoggedIn) });\n  }\n\n  export const setUsernameData = async (username?: string) => {\n    if (!username) {\n      await Storage.remove({ key: USERNAME });\n    } else {\n      await Storage.set({ key: USERNAME, value: username });\n    }\n  }\n\n  export const setHasSeenTutorialData = async (hasSeenTutorial: boolean) => {\n    await Storage.set({ key: HAS_SEEN_TUTORIAL, value: JSON.stringify(hasSeenTutorial) });\n  }"]},"metadata":{},"sourceType":"module"}